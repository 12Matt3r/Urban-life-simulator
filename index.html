<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ULS</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app-root"></div>

  <!-- Kernel -->
  <script type="module" src="kernel/eventBus.js"></script>
  <script type="module" src="kernel/router.js"></script>
  <script type="module" src="kernel/state.js"></script>
  <script type="module" src="kernel/hotpatch.js"></script>

  <!-- Systems -->
  <script src="systems/narrator.js"></script>
  <script src="systems/imagegen.js"></script>
  <script src="systems/music.js"></script>
  <script src="systems/save.js"></script>

  <!-- UI -->
  <script src="ui/hud.js"></script>
  <script src="ui/radio.js"></script>
  <script src="ui/dialogue.js"></script>

  <!-- Realms -->
  <script type="module" src="uls/uls.module.js"></script>
  <script type="module" src="livinghell/lh.module.js"></script>
  <script type="module" src="backrooms/bk.module.js"></script>
  <script type="module" src="dreamworld/dw.module.js"></script>

  <script type="module">
    import { router } from './kernel/router.js';
    import { eventBus } from './kernel/eventBus.js';
    import { state } from './kernel/state.js';

    // These are globals from the non-module scripts
    const ULS = window.ULS;
    const LH = window.LH;
    const BK = window.BK;
    const DW = window.DW;

    router.init(document.getElementById('app-root'), eventBus, state);

    router.register('ULS', ULS);
    router.register('LivingHell', LH);
    router.register('Backrooms', BK);
    router.register('Dreamworld', DW);

    // Start the tutorial
    router.go('ULS', { isTutorial: true });
  </script>
</body>
</html>